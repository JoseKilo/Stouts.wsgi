# This file was generated by Ansible for {{ ansible_fqdn }}
# Do NOT modify this file by hand!

upstream uwsgi-{{wsgi_hostname}} {
  server unix://{{base_run_directory}}/uwsgi.sock;
}

server {

    listen     80;
    server_name {{ wsgi_hostname }};

    access_log {{ base_logs_directory }}/nginx.log;
    error_log {{ base_logs_directory }}/nginx-errors.log;

    charset utf-8;
    client_max_body_size 15M;
    expires off;
    gzip on;

{% for location in wsgi_nginx_static_locations %}
    location {{location}} {
        root {{wsgi_directory}};
        expires max;
    }
{% endfor %}
{% for option in wsgi_nginx_options %}
    {{option}}
{% endfor %}

    location / {
        expires off;
        include uwsgi_params;
        uwsgi_pass uwsgi-{{wsgi_hostname}};
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_set_header Host $http_host;
    }

}
