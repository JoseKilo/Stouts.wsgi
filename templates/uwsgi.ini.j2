# This file was generated by Ansible for {{ansible_fqdn}}
# Do NOT modify this file by hand!

[uwsgi]
chdir = {{item.app_dir|default(wsgi_app_dir)}}
chmod-socket = 777
chown-socket = {{wsgi_user}}
die-on-term = true
enable-threads = {{ 'true' if wsgi_uwsgi_enable_threads else 'false' }}
{% if item.module|default(None) %}
module = {{item.module|default('')}}
{% else %}
file = {{item.file|default(wsgi_app_dir + '/wsgi.py')}}
{% endif %}
log-master = true
logto = {{wsgi_log_dir}}/{{item.name}}-uwsgi.log
master = true
max-requests = {{wsgi_uwsgi_max_requests}}
no-orphans = {{ 'true' if wsgi_uwsgi_no_orphans else 'false' }}
processes = {{item.uwsgi_processes|default(wsgi_uwsgi_processes)}}
socket = {{item.socket|default(wsgi_run_dir + '/' + item.name)}}
uid = {{wsgi_user}}
vaccuum = true
virtualenv = {{item.virtualenv|default(wsgi_virtualenv)}}
{% if wsgi_uwsgi_cpu_affinity is defined %}
cpu-affinity = {{ wsgi_uwsgi_cpu_affinity }}
{% endif %}
{% if wsgi_uwsgi_limit_as is defined %}
limit-as = {{wsgi_uwsgi_limit_as}}
{% endif %}
{% if wsgi_uwsgi_reload %}
py-autoreload = true
touch-reload = {{item.app_dir|default(wsgi_app_dir)}}
{% endif %}
{% for option in item.uwsgi_options|default(wsgi_uwsgi_options) %}
{{option}}
{% endfor %}
