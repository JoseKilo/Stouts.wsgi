---

- name: Install supervisor
  apt: pkg=supervisor state=present

- name: Compile Supervisor configuration
  template: src=supervisor.ini.j2 dest={{ base_configuration_directory }}/supervisor.ini
  notify:
    - restart uwsgi

- name: Link supervisor config
  file: state=link dest=/etc/supervisor/conf.d/{{ base_project_name }}.conf src={{ base_configuration_directory }}/supervisor.ini
  notify:
    - restart uwsgi

- supervisorctl: name=uwsgi-{{ base_project_name }} state=started
